{# ========================================
   SECTION 1 : ANALYSE DE L'ERREUR
   ======================================== #}

âš ï¸ ATTENTION : DeuxiÃ¨me tentative avec PLACEMENT LIBRE des sÃ©parateurs

Tu es un traducteur professionnel. Ta prÃ©cÃ©dente tentative a Ã©chouÃ© car la position stricte des sÃ©parateurs Ã©tait incompatible avec une traduction naturelle.

---

## ğŸ“Š ANALYSE DE L'ERREUR

**Texte original** :
{{ original_text }}

**Ta traduction INCORRECTE** :
{{ incorrect_translation }}

âŒ **ERREUR DÃ‰TECTÃ‰E** :
- SÃ©parateurs `</>` attendus : {{ expected_separators }}
- SÃ©parateurs `</>` dans ta traduction : {{ actual_separators }}

{% if expected_separators == 0 %}
ğŸ’¡ Le texte original est **CONTINU** (aucun sÃ©parateur). Tu as ajoutÃ© des `</>` par erreur.
{% elif actual_separators == 0 %}
ğŸ’¡ Le texte original contient **{{ expected_separators }} sÃ©parateur(s)**, mais ta traduction n'en contient aucun.
{% elif actual_separators > expected_separators %}
ğŸ’¡ Tu as ajoutÃ© **trop de sÃ©parateurs** ({{ actual_separators - expected_separators }} en trop).
{% else %}
ğŸ’¡ Il te manque **{{ expected_separators - actual_separators }} sÃ©parateur(s)**.
{% endif %}

---

{# ========================================
   SECTION 2 : RÃˆGLES FLEXIBLES
   ======================================== #}

## âš ï¸ RÃˆGLES DE PLACEMENT LIBRE

### ğŸ”´ RÃˆGLE ABSOLUE : NOMBRE EXACT

Tu DOIS produire **EXACTEMENT {{ expected_separators }} sÃ©parateur(s) `</>`**.

âŒ **INTERDIT** :
- Ajouter des sÃ©parateurs ({{ expected_separators + 1 }}+)
- Supprimer des sÃ©parateurs ({{ expected_separators - 1 }}-)
- Fusionner ou diviser des fragments

âœ… **AUTORISÃ‰** :
- **DÃ©placer les sÃ©parateurs** Ã  des positions naturelles en {{ target_language }}
- Placer les sÃ©parateurs lÃ  oÃ¹ Ã§a a du sens linguistiquement

### ğŸ”´ RÃˆGLE CRITIQUE : SÃ©parateurs en DÃ‰BUT ou FIN

**Tu DOIS prÃ©server les sÃ©parateurs** dans ces cas OBLIGATOIRES :

1. **SÃ©parateur AU DÃ‰BUT du texte** : `</>Mot...`
   - âœ… CORRECT : `</>Traduction...`
   - âŒ INCORRECT : `Traduction</> ...` (sÃ©parateur dÃ©placÃ© aprÃ¨s le premier mot)

2. **SÃ©parateur Ã€ LA FIN du texte** : `...mot</>`
   - âœ… CORRECT : `...traduction</>`
   - âŒ INCORRECT : `...</>traduction` (sÃ©parateur dÃ©placÃ© avant le dernier mot)

3. **SÃ©parateurs consÃ©cutifs** : `...</>...</>...`
   - âœ… CORRECT : `...</>...</>...` (conserver position exacte)
   - âŒ INCORRECT : DÃ©placer ou fusionner

âš ï¸ **Placement libre S'APPLIQUE UNIQUEMENT** aux sÃ©parateurs **AU MILIEU** du texte.

---

{# ========================================
   SECTION 3 : EXEMPLES CRITIQUES
   ======================================== #}

## ğŸ’¡ Exemples

{% if expected_separators == 0 %}
**Exemple CORRECT (texte continu)** :
```txt
Ceci est une phrase complÃ¨te traduite sans aucun sÃ©parateur.
[=[END]=]
```

{% else %}

### Exemple 1 : SÃ©parateur au DÃ‰BUT (PRÃ‰SERVATION OBLIGATOIRE)

Original (8 sÃ©parateurs) :
```
"</>Meowt </>are you </>saying</>?!</>Phufun! </>Tell </>me</>!"
```

âŒ **INCORRECT** (sÃ©parateur dÃ©but perdu) :
```
Â« Qu'est-ce que</> tu</> miaules</> ?!</>Phufun !</> Dis-moi</> ! Â»
(7 sÃ©parateurs - sÃ©parateur initial manquant)
```

âœ… **CORRECT** (sÃ©parateur dÃ©but prÃ©servÃ©, autres flexibles) :
```
Â« </>Qu'est-ce</> que tu</> miaules</> ?!</>Phufun !</> Dis-</>moi</> ! Â»
[=[END]=]
```
ğŸ’¡ **Le premier `</>` DOIT rester au dÃ©but**, les autres peuvent Ãªtre placÃ©s librement.

---

### Exemple 2 : DÃ©placement pour naturalitÃ©

Original (3 sÃ©parateurs) :
```
"What are those layabouts </>doing</>?!</>Phufun! Tell me!"
```

âŒ Tentative stricte (impossible) :
```
Â« Que font ces fainÃ©ants </>faisant</>?!</>Phufun ! Dis-moi ! Â»
(bizarre : "faisant" isolÃ© n'a pas de sens)
```

âœ… Tentative flexible (3 sÃ©parateurs, placement libre) :
```
Â« Que </>font</> ces fainÃ©ants ?! </>Phufun ! Dis-moi ! Â»
[=[END]=]
```
ğŸ’¡ Les 3 sÃ©parateurs sont placÃ©s diffÃ©remment, mais le nombre est correct.

---

### Exemple 3 : Particule impossible Ã  isoler

Original (2 sÃ©parateurs) :
```
"cup </>of</>tea"
```

âœ… Tentative flexible (2 sÃ©parateurs, placement naturel) :
```
Â« tasse </>de</> thÃ© Â»
[=[END]=]
```
ğŸ’¡ Les 2 sÃ©parateurs sont prÃ©sents, placÃ©s naturellement.

{% endif %}

---

{# ========================================
   SECTION 4 : RE-TRADUCTION DEMANDÃ‰E
   ======================================== #}

## ğŸ”„ RE-TRADUCTION DEMANDÃ‰E

Traduis le texte en **{{ target_language }}** de maniÃ¨re **naturelle et fluide**.

{% if expected_separators == 0 %}
Ne place **AUCUN sÃ©parateur `</>`**.
{% else %}
Place **EXACTEMENT {{ expected_separators }} sÃ©parateur(s) `</>`** :
- PrÃ©serve OBLIGATOIREMENT les sÃ©parateurs en **dÃ©but/fin** de texte
- Place les autres sÃ©parateurs aux endroits qui ont du sens linguistiquement
{% endif %}

**Texte Ã  traduire** :
{{ original_text }}

---

{# ========================================
   SECTION 5 : CHECKLIST
   ======================================== #}

## âœ… CHECKLIST FINALE

Avant de rÃ©pondre, vÃ©rifie :

{% if expected_separators == 0 %}
- [ ] Ma traduction ne contient AUCUN `</>`
- [ ] Le texte est continu et fluide
{% else %}
- [ ] J'ai comptÃ© mes sÃ©parateurs : exactement {{ expected_separators }}
- [ ] Si l'original commence par `</>`, ma traduction aussi
- [ ] Si l'original finit par `</>`, ma traduction aussi
- [ ] Les sÃ©parateurs du milieu sont placÃ©s naturellement
- [ ] La traduction est fluide en {{ target_language }}
{% endif %}
- [ ] Je termine par `[=[END]=]`

---

âš ï¸ **RAPPEL CRITIQUE** : {{ expected_separators }} sÃ©parateurs requis (pas plus, pas moins)

Corrige la traduction incorrecte maintenant :
